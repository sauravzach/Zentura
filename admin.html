<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Zentura | Admin Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="icon" type="image/svg+xml" href="assets/zentura-logo.svg" />
  <link rel="manifest" href="manifest.json" />
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js');
      });
    }
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
  <style>
    /* Professional Layout Overrides */
    .admin-body {
      background: #f8f9fa;
      margin: 0;
      font-family: 'Sora', sans-serif;
    }

    .admin-layout {
      display: grid;
      grid-template-columns: 280px 1fr;
      gap: 30px;
      padding: 30px;
      min-height: 100vh;
    }

    .admin-sidebar {
      background: #fff;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
      height: fit-content;
      position: sticky;
      top: 30px;
    }

    .panel-card {
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
      margin-bottom: 30px;
    }

    .status-dot {
      height: 8px;
      width: 8px;
      border-radius: 50%;
      display: inline-block;
      margin-right: 5px;
      background: #ccc;
    }

    .status-dot.is-active {
      background: #10b981;
    }

    .btn-danger {
      background: #fee2e2;
      color: #dc2626;
      border: 1px solid #fecaca;
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
      transition: 0.2s;
    }

    .btn-danger:hover {
      background: #fca5a5;
    }

    [hidden] {
      display: none !important;
    }

    .admin-nav-item {
      display: flex;
      align-items: center;
      padding: 12px 15px;
      margin-bottom: 5px;
      border-radius: 8px;
      color: #4b5563;
      text-decoration: none;
      transition: 0.2s;
      border: none;
      background: none;
      width: 100%;
      cursor: pointer;
      font-family: inherit;
      font-size: 0.95rem;
      text-align: left;
    }

    .admin-nav-item:hover {
      background: #f3f4f6;
    }

    .admin-nav-item.active {
      background: #eff6ff;
      color: #2563eb;
      font-weight: 600;
    }

    .section-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: #111827;
      margin: 25px 0 15px;
      padding-bottom: 8px;
      border-bottom: 1px solid #f3f4f6;
    }

    .input-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-bottom: 15px;
    }

    .card-editor {
      background: #f9fafb;
      padding: 15px;
      border-radius: 8px;
      border: 1px solid #e5e7eb;
      margin-bottom: 15px;
    }
  </style>
</head>

<body class="admin-body">
  <header class="navbar" style="background: #fff; border-bottom: 1px solid #eee; padding: 15px 0;">
    <div class="container nav-inner" style="display: flex; justify-content: space-between; align-items: center;">
      <a class="brand" href="index.html"
        style="text-decoration: none; color: #1a1a1a; font-weight: 600; font-size: 1.2rem;">
        Zentura Admin
      </a>
      <a href="index.html" class="btn btn-ghost">Back to Website</a>
    </div>
  </header>

  <main>
    <div class="container">
      <div id="loginView" class="panel-card" style="max-width: 450px; margin: 100px auto;">
        <h2 style="margin-top:0;">Admin Login</h2>
        <p style="color: #666; margin-bottom: 25px;">Please authenticate to access the control center.</p>
        <form id="loginForm">
          <div class="form-group">
            <label>Username / Email</label>
            <input id="adminUser" type="text" placeholder="admin@zentura.com" required
              style="width:100%; padding:10px; margin: 8px 0 20px; border:1px solid #ddd; border-radius:6px;" />
          </div>
          <div class="form-group">
            <label>Password</label>
            <div style="position: relative;">
              <input id="adminPass" type="password" required
                style="width:100%; padding:10px; margin: 8px 0 20px; border:1px solid #ddd; border-radius:6px;" />
              <button id="togglePassword" type="button" class="btn btn-ghost btn-small"
                style="position:absolute; right:10px; top:12px; border:none; background:none;">Show</button>
            </div>
          </div>
          <button class="btn btn-primary" type="submit" style="width: 100%; padding: 12px; font-weight: 600;">Log
            In</button>
          <p id="loginStatus" class="form-note" style="margin-top: 15px; color: #dc2626;"></p>
          <hr style="border: 0; border-top: 1px solid #eee; margin: 20px 0;">
          <button type="button" class="btn btn-ghost" style="width: 100%; font-size: 0.8rem;"
            onclick="localStorage.clear(); window.location.reload();">Reset Session </button>
        </form>
      </div>

      <div id="adminView" class="admin-layout" hidden>
        <aside class="admin-sidebar">
          <h3 style="margin-top:0;">Control Center</h3>
          <p style="font-size: 0.8rem; color: #666; margin-bottom: 20px;">Signed in as: <strong
              id="adminName">-</strong></p>

          <nav>
            <button class="admin-nav-item active" data-tab="content">Site Content</button>
            <div class="admin-nav-item" data-tab="trips">üì¶ Trip Packages</div>
            <div class="admin-nav-item" data-tab="library">üñºÔ∏è Image Library</div>
            <div class="admin-nav-item" data-tab="messages">üì¨ User Inquiries</div>
          </nav>

          <hr style="border: 0; border-top: 1px solid #eee; margin: 20px 0;">
          <button id="logoutBtn" class="btn-danger" style="width: 100%;">Sign Out</button>
        </aside>

        <div class="admin-panel">
          <!-- SECTION 1: SITE CONTENT -->
          <section id="tab-content" class="tab-pane">
            <div class="panel-card">
              <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: 20px;">
                <h3 style="margin:0;">Site Editor</h3>
                <button form="siteForm" type="submit" class="btn btn-primary">Save All Changes</button>
              </div>

              <form id="siteForm">
                <!-- HERO SECTION -->
                <div class="section-title">Hero Banner</div>
                <div class="input-grid">
                  <div class="form-group"><label>Badge text</label><input id="heroBadgeInput" type="text" /></div>
                  <div class="form-group"><label>Main Headline</label><input id="heroTitleInput" type="text" /></div>
                </div>
                <div class="input-grid">
                  <div class="form-group"><label>Intro Paragraph</label><textarea id="heroDescriptionInput"
                      style="min-height: 80px;"></textarea></div>
                  <div class="form-group"><label>Featured Tag Default</label><input id="heroFeaturedTagInput"
                      type="text" placeholder="e.g. All permits handled" /></div>
                </div>

                <!-- STATS SECTION -->
                <div class="section-title">Live Stats</div>
                <div style="display:grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px;">
                  <div class="card-editor">
                    <label>Stat 1</label>
                    <input id="stat0_val" type="text" placeholder="Value (e.g. 120+)" style="margin-bottom:8px;">
                    <input id="stat0_label" type="text" placeholder="Label">
                  </div>
                  <div class="card-editor">
                    <label>Stat 2</label>
                    <input id="stat1_val" type="text" placeholder="Value (e.g. 4.8/5)" style="margin-bottom:8px;">
                    <input id="stat1_label" type="text" placeholder="Label">
                  </div>
                  <div class="card-editor">
                    <label>Stat 3</label>
                    <input id="stat2_val" type="text" placeholder="Value (e.g. 24/7)" style="margin-bottom:8px;">
                    <input id="stat2_label" type="text" placeholder="Label">
                  </div>
                </div>

                <!-- WHY ZENTURA SECTION -->
                <div class="section-title">Why Travelers Trust Us</div>
                <div class="input-grid">
                  <div class="form-group"><label>Section Title</label><input id="whyTitleInput" type="text" /></div>
                  <div class="form-group"><label>Section Description</label><input id="whyDescriptionInput"
                      type="text" /></div>
                </div>
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                  <div class="card-editor">
                    <label>Reason 1</label>
                    <input id="why0_title" type="text" style="margin-bottom:8px;" placeholder="Title">
                    <textarea id="why0_text" placeholder="Description"></textarea>
                  </div>
                  <div class="card-editor">
                    <label>Reason 2</label>
                    <input id="why1_title" type="text" style="margin-bottom:8px;" placeholder="Title">
                    <textarea id="why1_text" placeholder="Description"></textarea>
                  </div>
                  <div class="card-editor">
                    <label>Reason 3</label>
                    <input id="why2_title" type="text" style="margin-bottom:8px;" placeholder="Title">
                    <textarea id="why2_text" placeholder="Description"></textarea>
                  </div>
                  <div class="card-editor">
                    <label>Reason 4</label>
                    <input id="why3_title" type="text" style="margin-bottom:8px;" placeholder="Title">
                    <textarea id="why3_text" placeholder="Description"></textarea>
                  </div>
                </div>

                <!-- TESTIMONIALS SECTION -->
                <div class="section-title">Customer Stories</div>
                <div style="display:grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px;">
                  <div class="card-editor">
                    <label>Story 1</label>
                    <textarea id="test0_quote" style="margin-bottom:8px;" placeholder="Quote"></textarea>
                    <input id="test0_name" type="text" placeholder="Customer Name">
                  </div>
                  <div class="card-editor">
                    <label>Story 2</label>
                    <textarea id="test1_quote" style="margin-bottom:8px;" placeholder="Quote"></textarea>
                    <input id="test1_name" type="text" placeholder="Customer Name">
                  </div>
                  <div class="card-editor">
                    <label>Story 3</label>
                    <textarea id="test2_quote" style="margin-bottom:8px;" placeholder="Quote"></textarea>
                    <input id="test2_name" type="text" placeholder="Customer Name">
                  </div>
                </div>

                <!-- PROCESS SECTION -->
                <div class="section-title">How it Works (Steps)</div>
                <div style="display:grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px;">
                  <div class="card-editor">
                    <label>Step 1</label>
                    <input id="step0_title" type="text" style="margin-bottom:8px;" placeholder="Title">
                    <textarea id="step0_text" placeholder="Description"></textarea>
                  </div>
                  <div class="card-editor">
                    <label>Step 2</label>
                    <input id="step1_title" type="text" style="margin-bottom:8px;" placeholder="Title">
                    <textarea id="step1_text" placeholder="Description"></textarea>
                  </div>
                  <div class="card-editor">
                    <label>Step 3</label>
                    <input id="step2_title" type="text" style="margin-bottom:8px;" placeholder="Title">
                    <textarea id="step2_text" placeholder="Description"></textarea>
                  </div>
                </div>

                <!-- SUPPORT SECTION -->
                <div class="section-title">Client Support Features</div>
                <div style="display:grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px;">
                  <div class="card-editor">
                    <label>Support Card 1</label>
                    <input id="supp0_title" type="text" style="margin-bottom:8px;" placeholder="Title">
                    <textarea id="supp0_text" placeholder="Description"></textarea>
                  </div>
                  <div class="card-editor">
                    <label>Support Card 2</label>
                    <input id="supp1_title" type="text" style="margin-bottom:8px;" placeholder="Title">
                    <textarea id="supp1_text" placeholder="Description"></textarea>
                  </div>
                  <div class="card-editor">
                    <label>Support Card 3</label>
                    <input id="supp2_title" type="text" style="margin-bottom:8px;" placeholder="Title">
                    <textarea id="supp2_text" placeholder="Description"></textarea>
                  </div>
                </div>

                <!-- CONTACT / FOOTER SECTION -->
                <div class="section-title">Business Contact</div>
                <div class="input-grid">
                  <div class="form-group"><label>Phone Number</label><input id="contactPhoneInput" type="text" /></div>
                  <div class="form-group"><label>Email Address</label><input id="contactEmailInput" type="text" /></div>
                </div>
                <div class="form-group"><label>Office Location</label><input id="contactOfficeInput" type="text" />
                </div>

                <div style="margin-top: 30px; text-align: right; padding-top: 20px; border-top: 2px solid #eee;">
                  <button type="submit" class="btn btn-primary" style="padding: 12px 30px;">Save All Changes</button>
                  <p id="siteStatus" class="form-note" style="margin-top:10px;"></p>
                </div>
              </form>
            </div>
          </section>

          <!-- SECTION 2: TRIP PACKAGES -->
          <section id="tab-trips" class="tab-pane" hidden>
            <div class="panel-card">
              <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: 20px;">
                <h3 style="margin:0;">Active Packages</h3>
                <button class="btn btn-primary" onclick="window.openTripEditor()">+ Add New Trip</button>
              </div>

              <div id="tripEditor"
                style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 25px; border: 1px solid #eee;"
                hidden>
                <h4 style="margin-top:0;" id="tripEditorTitle">Add New Trip</h4>
                <form id="tripForm">
                  <input type="hidden" id="tripId" />

                  <!-- EDITOR TABS -->
                  <div class="editor-tabs"
                    style="display:flex; gap:10px; margin-bottom:20px; border-bottom:1px solid #ddd;">
                    <button type="button" class="btn btn-ghost active" onclick="window.switchEditorTab('basics')"
                      id="tabBtn-basics">Basics</button>
                    <button type="button" class="btn btn-ghost" onclick="window.switchEditorTab('itinerary')"
                      id="tabBtn-itinerary">Itinerary</button>
                    <button type="button" class="btn btn-ghost" onclick="window.switchEditorTab('details')"
                      id="tabBtn-details">Details & Media</button>
                  </div>

                  <!-- TAB 1: BASICS -->
                  <div id="editor-tab-basics" class="editor-pane">
                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                      <div class="form-group"><label>Trip Title</label><input required id="tripTitle" type="text"
                          style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px;" /></div>
                      <div class="form-group"><label>Location</label><input required id="tripLocation" type="text"
                          style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px;" /></div>
                      <div class="form-group"><label>Duration</label><input required id="tripDuration" type="text"
                          placeholder="e.g. 3 Days / 2 Nights"
                          style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px;" /></div>
                      <div class="form-group"><label>Price (INR)</label><input required id="tripPrice" type="number"
                          style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px;" /></div>
                    </div>
                    <div class="form-group" style="margin-top:15px;"><label>Description</label><textarea required
                        id="tripDesc"
                        style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; min-height: 80px;"></textarea>
                    </div>
                    <div style="margin-top:15px;">
                      <label style="display:flex; align-items:center; gap: 10px;">
                        <input type="checkbox" id="tripFeatured" />
                        <strong>Mark as Featured?</strong>
                      </label>
                    </div>
                  </div>

                  <!-- TAB 2: ITINERARY -->
                  <div id="editor-tab-itinerary" class="editor-pane" hidden>
                    <div style="display:flex; justify-content:space-between; align-items:center;">
                      <label>Daily Timeline</label>
                      <button type="button" class="btn btn-ghost btn-small" onclick="window.addItineraryDay()">+ Add
                        Day</button>
                    </div>
                    <div id="itineraryContainer"
                      style="margin-top:10px; display:flex; flex-direction:column; gap:10px;">
                      <!-- Days added here -->
                    </div>
                  </div>

                  <!-- TAB 3: DETAILS -->
                  <div id="editor-tab-details" class="editor-pane" hidden>
                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                      <div class="form-group"><label>Inclusions (one per line)</label><textarea id="tripInclusions"
                          style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; min-height: 120px;"></textarea>
                      </div>
                      <div class="form-group"><label>Exclusions (one per line)</label><textarea id="tripExclusions"
                          style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; min-height: 120px;"></textarea>
                      </div>
                    </div>
                    <div class="form-group" style="margin-top:15px;">
                      <label>Trip Image</label>
                      <div style="display:flex; gap:10px; align-items:center;">
                        <input type="file" id="tripImageFn" accept="image/*" />
                        <span>or</span>
                        <button type="button" class="btn btn-ghost btn-small"
                          onclick="window.openImageLibrary('trip')">Choose from Library</button>
                      </div>
                      <input type="hidden" id="tripImageUrl" />
                      <p id="imagePreview" class="form-note"></p>
                    </div>
                  </div>

                  <div
                    style="margin-top: 20px; display: flex; gap: 10px; border-top: 1px solid #eee; padding-top: 20px;">
                    <button type="submit" class="btn btn-primary">Save Trip</button>
                    <button type="button" class="btn btn-ghost" onclick="window.closeTripEditor()">Cancel</button>
                  </div>
                </form>
              </div>

              <table class="table" id="tripsTable" style="width:100%; border-collapse: collapse; margin-top:20px;">
                <thead>
                  <tr style="text-align:left; border-bottom: 2px solid #eee;">
                    <th style="padding:10px;">Trip Name</th>
                    <th>Price</th>
                    <th>Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
          </section>

          <!-- SECTION 3: INQUIRIES -->
          <section id="tab-messages" class="tab-pane" hidden>
            <div class="panel-card">
              <h3 style="margin-top:0;">User Inquiries</h3>
              <table class="table" id="messagesTable" style="width:100%; border-collapse: collapse; margin-top:20px;">
                <thead>
                  <tr style="text-align:left; border-bottom: 2px solid #eee;">
                    <th style="padding:10px;">Client</th>
                    <th>Contact</th>
                    <th>Trip</th>
                    <th>Month</th>
                    <th>Notes</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </section>

          <!-- SECTION 4: LIBRARY -->
          <section id="tab-library" class="tab-pane" hidden>
            <div class="panel-card">
              <div style="display:flex; justify-content:space-between; align-items:baseline; margin-bottom:20px;">
                <h3 style="margin-top:0;">Image Library</h3>
                <p class="form-note">Select an image to use it in your trip package.</p>
              </div>
              <div id="libraryGrid"
                style="display:grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap:15px;">
                <!-- Images injected here -->
                <p>Loading library...</p>
              </div>
            </div>
          </section>
        </div>
      </div>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="config.js"></script>
  <script src="data.js"></script>
  <script src="admin.js"></script>
</body>

</html>